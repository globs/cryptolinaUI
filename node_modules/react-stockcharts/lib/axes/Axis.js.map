{"version":3,"sources":["../../../src/lib/axes/Axis.js"],"names":["Axis","props","renderSVG","bind","drawOnCanvas","saveNode","getMoreProps","node","ctx","moreProps","showDomain","showTicks","transform","range","getScale","save","translate","drawAxisLine","tickProps","tickHelper","drawTicks","restore","className","ticks","axisTicksSVG","domain","axisLineSVG","bg","axisZoomCallback","zoomCursorClassName","zoomEnabled","inverted","getMouseDelta","edgeClip","onContextMenu","onDoubleClick","zoomCapture","propTypes","innerTickSize","number","outerTickSize","tickFormat","func","tickPadding","tickSize","tickValues","array","tickInterval","bool","string","arrayOf","isRequired","object","defaultProps","scale","orient","tickLabelFill","tickStrokeWidth","tickStrokeDasharray","fontSize","fontFamily","flexTicks","showTickLabel","tickArguments","tickValuesProp","tickStroke","tickStrokeOpacity","min","max","baseFormat","format","d","sign","tickSpacing","Math","dy","canvas_dy","textAnchor","map","x","round","value","x1","y1","x2","y2","labelX","labelY","nodes","id","fy","origX","simulation","force","strength","stop","i","tick","zip","combine","a","b","abs","y","domainClassName","fill","stroke","strokeWidth","opacity","xAxis","lineWidth","strokeStyle","beginPath","moveTo","lineTo","Tick","children","oneOf","result","idx","fillStyle","forEach","drawEachTick","font","textAlign","drawEachTickLabel","setLineDash","split","fillText"],"mappings":"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","file":"Axis.js","sourcesContent":["\"use strict\";\n\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { forceSimulation, forceX, forceCollide } from \"d3-force\";\nimport { range as d3Range } from \"d3-array\";\n\nimport GenericChartComponent from \"../GenericChartComponent\";\nimport { getAxisCanvas } from \"../GenericComponent\";\nimport AxisZoomCapture from \"./AxisZoomCapture\";\n\nimport { first, last, hexToRGBA, isNotDefined, isDefined, identity, zipper, strokeDashTypes, getStrokeDasharray } from \"../utils\";\n\nclass Axis extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.renderSVG = this.renderSVG.bind(this);\n\t\tthis.drawOnCanvas = this.drawOnCanvas.bind(this);\n\t\tthis.saveNode = this.saveNode.bind(this);\n\t\tthis.getMoreProps = this.getMoreProps.bind(this);\n\t}\n\tsaveNode(node) {\n\t\tthis.node = node;\n\t}\n\tgetMoreProps() {\n\t\treturn this.node.getMoreProps();\n\t}\n\tdrawOnCanvas(ctx, moreProps) {\n\t\tconst { showDomain, showTicks, transform, range, getScale } = this.props;\n\n\t\tctx.save();\n\t\tctx.translate(transform[0], transform[1]);\n\n\t\tif (showDomain) drawAxisLine(ctx, this.props, range);\n\t\tif (showTicks) {\n\t\t\tconst tickProps = tickHelper(this.props, getScale(moreProps));\n\t\t\tdrawTicks(ctx, tickProps);\n\t\t}\n\n\t\tctx.restore();\n\t}\n\trenderSVG(moreProps) {\n\t\tconst { className } = this.props;\n\t\tconst { showDomain, showTicks, range, getScale } = this.props;\n\n\t\tconst ticks = showTicks ? axisTicksSVG(this.props, getScale(moreProps)) : null;\n\t\tconst domain = showDomain ? axisLineSVG(this.props, range) : null;\n\n\t\treturn <g className={className}>\n\t\t\t{ticks}\n\t\t\t{domain}\n\t\t</g>;\n\t}\n\trender() {\n\t\tconst { bg, axisZoomCallback, zoomCursorClassName, zoomEnabled, getScale, inverted } = this.props;\n\t\tconst { transform, getMouseDelta, edgeClip } = this.props;\n\t\tconst { onContextMenu, onDoubleClick } = this.props;\n\n\t\tconst zoomCapture = zoomEnabled\n\t\t\t? <AxisZoomCapture\n\t\t\t\tbg={bg}\n\t\t\t\tgetScale={getScale}\n\t\t\t\tgetMoreProps={this.getMoreProps}\n\t\t\t\tgetMouseDelta={getMouseDelta}\n\t\t\t\taxisZoomCallback={axisZoomCallback}\n\t\t\t\tzoomCursorClassName={zoomCursorClassName}\n\t\t\t\tinverted={inverted}\n\t\t\t\tonContextMenu={onContextMenu}\n\t\t\t\tonDoubleClick={onDoubleClick}\n\t\t\t/>\n\t\t\t: null;\n\n\t\treturn <g transform={`translate(${ transform[0] }, ${ transform[1] })`}>\n\t\t\t{zoomCapture}\n\t\t\t<GenericChartComponent ref={this.saveNode}\n\t\t\t\tcanvasToDraw={getAxisCanvas}\n\t\t\t\tclip={false}\n\t\t\t\tedgeClip={edgeClip}\n\t\t\t\tsvgDraw={this.renderSVG}\n\t\t\t\tcanvasDraw={this.drawOnCanvas}\n\t\t\t\tdrawOn={[\"pan\"]}\n\t\t\t/>\n\t\t</g>;\n\t}\n}\n\nAxis.propTypes = {\n\tinnerTickSize: PropTypes.number,\n\touterTickSize: PropTypes.number,\n\ttickFormat: PropTypes.func,\n\ttickPadding: PropTypes.number,\n\ttickSize: PropTypes.number,\n\tticks: PropTypes.number,\n\ttickValues: PropTypes.array,\n\ttickInterval: PropTypes.number,\n\tshowDomain: PropTypes.bool,\n\tshowTicks: PropTypes.bool,\n\tclassName: PropTypes.string,\n\taxisZoomCallback: PropTypes.func,\n\tzoomEnabled: PropTypes.bool,\n\tinverted: PropTypes.bool,\n\tzoomCursorClassName: PropTypes.string,\n\ttransform: PropTypes.arrayOf(PropTypes.number).isRequired,\n\trange: PropTypes.arrayOf(PropTypes.number).isRequired,\n\tgetMouseDelta: PropTypes.func.isRequired,\n\tgetScale: PropTypes.func.isRequired,\n\tbg: PropTypes.object.isRequired,\n\tedgeClip: PropTypes.bool.isRequired,\n\tonContextMenu: PropTypes.func,\n\tonDoubleClick: PropTypes.func,\n};\n\nAxis.defaultProps = {\n\tzoomEnabled: false,\n\tzoomCursorClassName: \"\",\n\tedgeClip: false,\n};\n\nfunction tickHelper(props, scale) {\n\tconst {\n\t\torient, innerTickSize, tickFormat, tickPadding,\n\t\ttickLabelFill, tickStrokeWidth, tickStrokeDasharray,\n\t\tfontSize, fontFamily, showTicks, flexTicks,\n\t\tshowTickLabel,\n\t} = props;\n\tconst {\n\t\tticks: tickArguments, tickValues: tickValuesProp,\n\t\ttickStroke, tickStrokeOpacity, tickInterval\n\t} = props;\n\n\t// if (tickArguments) tickArguments = [tickArguments];\n\n\tlet tickValues;\n\tif (isDefined(tickValuesProp)) {\n\t\ttickValues = tickValuesProp;\n\t} else if (isDefined(tickInterval)) {\n\t\tconst [min, max] = scale.domain();\n\t\ttickValues = d3Range(min, max, (max - min) / tickInterval);\n\t} else if (isDefined(scale.ticks)) {\n\t\ttickValues = scale.ticks(tickArguments, flexTicks);\n\t} else {\n\t\ttickValues = scale.domain();\n\t}\n\n\tconst baseFormat = scale.tickFormat\n\t\t? scale.tickFormat(tickArguments)\n\t\t: identity;\n\n\tconst format = isNotDefined(tickFormat)\n\t\t? baseFormat\n\t\t: d => tickFormat(d) || \"\";\n\n\tconst sign = orient === \"top\" || orient === \"left\" ? -1 : 1;\n\tconst tickSpacing = Math.max(innerTickSize, 0) + tickPadding;\n\n\tlet ticks, dy, canvas_dy, textAnchor;\n\n\tif (orient === \"bottom\" || orient === \"top\") {\n\t\tdy = sign < 0 ? \"0em\" : \".71em\";\n\t\tcanvas_dy = sign < 0 ? 0 : (fontSize * .71);\n\t\ttextAnchor = \"middle\";\n\n\t\tticks = tickValues.map(d => {\n\t\t\tconst x = Math.round(scale(d));\n\t\t\treturn {\n\t\t\t\tvalue: d,\n\t\t\t\tx1: x,\n\t\t\t\ty1: 0,\n\t\t\t\tx2: x,\n\t\t\t\ty2: sign * innerTickSize,\n\t\t\t\tlabelX: x,\n\t\t\t\tlabelY: sign * tickSpacing,\n\t\t\t};\n\t\t});\n\n\t\tif (showTicks && flexTicks) {\n\t\t\t// console.log(ticks, showTicks);\n\n\t\t\tconst nodes = ticks.map(d => ({ id: d.value, value: d.value, fy: d.y2, origX: d.x1 }));\n\n\t\t\tconst simulation = forceSimulation(nodes)\n\t\t\t\t.force(\"x\", forceX(d => d.origX).strength(1))\n\t\t\t\t.force(\"collide\", forceCollide(22))\n\t\t\t\t// .force(\"center\", forceCenter())\n\t\t\t\t.stop();\n\n\t\t\tfor (let i = 0; i < 100; ++i) simulation.tick();\n\t\t\t// console.log(nodes);\n\n\t\t\tconst zip = zipper()\n\t\t\t\t.combine((a, b) => {\n\t\t\t\t\tif (Math.abs(b.x - b.origX) > 0.01) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t...a,\n\t\t\t\t\t\t\tx2: b.x,\n\t\t\t\t\t\t\tlabelX: b.x\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\treturn a;\n\t\t\t\t});\n\n\t\t\tticks = zip(ticks, nodes);\n\t\t}\n\n\n\t} else {\n\t\tticks = tickValues.map(d => {\n\t\t\tconst y = Math.round(scale(d));\n\t\t\treturn {\n\t\t\t\tvalue: d,\n\t\t\t\tx1: 0,\n\t\t\t\ty1: y,\n\t\t\t\tx2: sign * innerTickSize,\n\t\t\t\ty2: y,\n\t\t\t\tlabelX: sign * tickSpacing,\n\t\t\t\tlabelY: y,\n\t\t\t};\n\t\t});\n\n\t\tdy = \".32em\";\n\t\tcanvas_dy = (fontSize * .32);\n\t\ttextAnchor = sign < 0 ? \"end\" : \"start\";\n\t}\n\n\treturn {\n\t\tticks, scale, tickStroke,\n\t\ttickLabelFill: (tickLabelFill || tickStroke),\n\t\ttickStrokeOpacity,\n\t\ttickStrokeWidth,\n\t\ttickStrokeDasharray,\n\t\tdy,\n\t\tcanvas_dy,\n\t\ttextAnchor,\n\t\tfontSize,\n\t\tfontFamily,\n\t\tformat,\n\t\tshowTickLabel,\n\t};\n}\n\n/* eslint-disable react/prop-types */\nfunction axisLineSVG(props, range) {\n\tconst { orient, outerTickSize } = props;\n\tconst { domainClassName, fill, stroke, strokeWidth, opacity } = props;\n\n\tconst sign = orient === \"top\" || orient === \"left\" ? -1 : 1;\n\n\tlet d;\n\n\tif (orient === \"bottom\" || orient === \"top\") {\n\t\td = \"M\" + range[0] + \",\" + sign * outerTickSize + \"V0H\" + range[1] + \"V\" + sign * outerTickSize;\n\t} else {\n\t\td = \"M\" + sign * outerTickSize + \",\" + range[0] + \"H0V\" + range[1] + \"H\" + sign * outerTickSize;\n\t}\n\n\treturn (\n\t\t<path\n\t\t\tclassName={domainClassName}\n\t\t\td={d}\n\t\t\tfill={fill}\n\t\t\topacity={opacity}\n\t\t\tstroke={stroke}\n\t\t\tstrokeWidth={strokeWidth} >\n\t\t</path>\n\t);\n}\n/* eslint-enable react/prop-types */\n\n\nfunction drawAxisLine(ctx, props, range) {\n\t// props = { ...AxisLine.defaultProps, ...props };\n\n\tconst { orient, outerTickSize, stroke, strokeWidth, opacity } = props;\n\n\tconst sign = orient === \"top\" || orient === \"left\" ? -1 : 1;\n\tconst xAxis = (orient === \"bottom\" || orient === \"top\");\n\n\t// var range = d3_scaleRange(xAxis ? xScale : yScale);\n\n\tctx.lineWidth = strokeWidth;\n\tctx.strokeStyle = hexToRGBA(stroke, opacity);\n\n\tctx.beginPath();\n\n\tif (xAxis) {\n\t\tctx.moveTo(first(range), sign * outerTickSize);\n\t\tctx.lineTo(first(range), 0);\n\t\tctx.lineTo(last(range), 0);\n\t\tctx.lineTo(last(range), sign * outerTickSize);\n\t} else {\n\t\tctx.moveTo(sign * outerTickSize, first(range));\n\t\tctx.lineTo(0, first(range));\n\t\tctx.lineTo(0, last(range));\n\t\tctx.lineTo(sign * outerTickSize, last(range));\n\t}\n\tctx.stroke();\n}\n\nfunction Tick(props) {\n\tconst { tickLabelFill, tickStroke, tickStrokeOpacity, tickStrokeDasharray, tickStrokeWidth, textAnchor, fontSize, fontFamily } = props;\n\tconst { x1, y1, x2, y2, labelX, labelY, dy } = props;\n\treturn (\n\t\t<g className=\"tick\">\n\t\t\t<line\n\t\t\t\tshapeRendering=\"crispEdges\"\n\t\t\t\topacity={tickStrokeOpacity}\n\t\t\t\tstroke={tickStroke}\n\t\t\t\tstrokeWidth={tickStrokeWidth}\n\t\t\t\tstrokeDasharray={getStrokeDasharray(tickStrokeDasharray)}\n\t\t\t\tx1={x1} y1={y1}\n\t\t\t\tx2={x2} y2={y2} />\n\t\t\t<text\n\t\t\t\tdy={dy} x={labelX} y={labelY}\n\t\t\t\tfill={tickLabelFill}\n\t\t\t\tfontSize={fontSize}\n\t\t\t\tfontFamily={fontFamily}\n\t\t\t\ttextAnchor={textAnchor}>\n\t\t\t\t{props.children}\n\t\t\t</text>\n\t\t</g>\n\t);\n}\n\nTick.propTypes = {\n\tchildren: PropTypes.string.isRequired,\n\tx1: PropTypes.number.isRequired,\n\ty1: PropTypes.number.isRequired,\n\tx2: PropTypes.number.isRequired,\n\ty2: PropTypes.number.isRequired,\n\tlabelX: PropTypes.number.isRequired,\n\tlabelY: PropTypes.number.isRequired,\n\tdy: PropTypes.string.isRequired,\n\ttickStroke: PropTypes.string,\n\ttickLabelFill: PropTypes.string,\n\ttickStrokeWidth: PropTypes.number,\n\ttickStrokeOpacity: PropTypes.number,\n\ttickStrokeDasharray: PropTypes.oneOf(strokeDashTypes),\n\ttextAnchor: PropTypes.string,\n\tfontSize: PropTypes.number,\n\tfontFamily: PropTypes.string,\n};\n\nfunction axisTicksSVG(props, scale) {\n\tconst result = tickHelper(props, scale);\n\n\tconst { tickLabelFill, tickStroke, tickStrokeOpacity, tickStrokeWidth, tickStrokeDasharray, textAnchor } = result;\n\tconst { fontSize, fontFamily, ticks, format } = result;\n\n\tconst { dy } = result;\n\n\treturn (\n\t\t<g>\n\t\t\t{ticks.map((tick, idx) => {\n\t\t\t\treturn (\n\t\t\t\t\t<Tick key={idx}\n\t\t\t\t\t\ttickStroke={tickStroke}\n\t\t\t\t\t\ttickLabelFill={tickLabelFill}\n\t\t\t\t\t\ttickStrokeWidth={tickStrokeWidth}\n\t\t\t\t\t\ttickStrokeOpacity={tickStrokeOpacity}\n\t\t\t\t\t\ttickStrokeDasharray={tickStrokeDasharray}\n\t\t\t\t\t\tdy={dy}\n\t\t\t\t\t\tx1={tick.x1} y1={tick.y1}\n\t\t\t\t\t\tx2={tick.x2} y2={tick.y2}\n\t\t\t\t\t\tlabelX={tick.labelX} labelY={tick.labelY}\n\t\t\t\t\t\ttextAnchor={textAnchor}\n\t\t\t\t\t\tfontSize={fontSize} fontFamily={fontFamily}>{format(tick.value)}</Tick>\n\t\t\t\t);\n\t\t\t})}\n\t\t</g>\n\t);\n}\n\nfunction drawTicks(ctx, result) {\n\n\tconst { tickStroke, tickStrokeOpacity, tickLabelFill } = result;\n\tconst { textAnchor, fontSize, fontFamily, ticks, showTickLabel } = result;\n\n\tctx.strokeStyle = hexToRGBA(tickStroke, tickStrokeOpacity);\n\n\tctx.fillStyle = tickStroke;\n\t// ctx.textBaseline = 'middle';\n\n\tticks.forEach((tick) => {\n\t\tdrawEachTick(ctx, tick, result);\n\t});\n\n\tctx.font = `${ fontSize }px ${fontFamily}`;\n\tctx.fillStyle = tickLabelFill;\n\tctx.textAlign = textAnchor === \"middle\" ? \"center\" : textAnchor;\n\n\tif (showTickLabel) {\n\t\tticks.forEach((tick) => {\n\t\t\tdrawEachTickLabel(ctx, tick, result);\n\t\t});\n\t}\n}\n\nfunction drawEachTick(ctx, tick, result) {\n\tconst { tickStrokeWidth, tickStrokeDasharray } = result;\n\n\tctx.beginPath();\n\n\tctx.moveTo(tick.x1, tick.y1);\n\tctx.lineTo(tick.x2, tick.y2);\n\tctx.lineWidth = tickStrokeWidth;\n\tctx.setLineDash(getStrokeDasharray(tickStrokeDasharray).split(\",\"));\n\tctx.stroke();\n}\n\nfunction drawEachTickLabel(ctx, tick, result) {\n\tconst { canvas_dy, format } = result;\n\n\tctx.beginPath();\n\tctx.fillText(format(tick.value), tick.labelX, tick.labelY + canvas_dy);\n}\n\nexport default Axis;\n"]}